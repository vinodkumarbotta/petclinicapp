---
apiVersion: apps/v1
kind: Deployment
metadata:
    name: petclinicapp
    labels:
        app: petclinicapp
        type: petclinicapp-dev
        build_number: ${BUILD_NUMBER}
spec:
   selector:
      matchLabels:
         app: petclinicapp
         type: petclinicapp-dev
         
   template: 
       metadata: 
          name: petclinicapp-pod
          labels: 
              app: petclinicapp
              type: petclinicapp-dev

       spec: 
          containers:
            - image:  vsiraparapu/petclinicapp:latest
              name:  petclinicapp
              ports:
                - containerPort: 8080
              readinessProbe: 
                  httpGet: 
                     path: /sample
                     port: 8080
          
   replicas: 1
---
apiVersion: v1
kind: Service
metadata: 
   name: petclinceapp-svc
   labels: 
       app: petclinicapp
       type: petclinceapp-svc

spec: 
    type: LoadBalancer
    ports:
        - port: 80
          targetPort: 8080
    selector: 
      app: petclinicapp
      type: petclinicapp-dev
   